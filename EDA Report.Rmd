---
title: "EDA Report"
author: "Tim Dugan"
date: "2025-07-28"
output: html_document
---

```{r setup, include=FALSE}
library(tidyverse)
```

```{r}
#Loading in the data sets

FYConsolidatedData = read.csv("h233.csv")
LongitudeData3Y = read.csv("h226.csv")
OfficeBasedVisits = read.csv("h227.csv")
load("NSDUH_2021.RData")
NSDUH = PUF2021_121323
```

```{r}
#Trimming FYConsolidatedData for usability

keeps <- c("DUPERSID","AGE21X", "SEX", "RACEV1X", "EDUCYR", "POVCAT21", "TTLP21X", "INSCOV21", "REGION21", "MNHLTH53","PERWT21F")

FYConsolidatedDataClean <- subset(FYConsolidatedData, select = keeps)

FYConsolidatedDataClean
```

```{r}
#Replacing numeric values with qualitative details FYConsolidatedDataClean

#Race
FYConsolidatedDataClean$RACEV1X[FYConsolidatedDataClean$RACEV1X == 1] <- 'White'
FYConsolidatedDataClean$RACEV1X[FYConsolidatedDataClean$RACEV1X == 2] <- 'Black'
FYConsolidatedDataClean$RACEV1X[FYConsolidatedDataClean$RACEV1X == 3] <- 'Amer Indian/Alaska Native'
FYConsolidatedDataClean$RACEV1X[FYConsolidatedDataClean$RACEV1X == 4] <- 'Asian/Natv Hawaiian/Pacfc Isl'
FYConsolidatedDataClean$RACEV1X[FYConsolidatedDataClean$RACEV1X == 6] <- 'Multiple Races Reported'

#Sex
FYConsolidatedDataClean$SEX[FYConsolidatedDataClean$SEX == 1] <- 'Male'
FYConsolidatedDataClean$SEX[FYConsolidatedDataClean$SEX == 2] <- 'Female'

#Categorical Poverty
FYConsolidatedDataClean$POVCAT21[FYConsolidatedDataClean$POVCAT21 == 1] <- 'Poor/Negative'
FYConsolidatedDataClean$POVCAT21[FYConsolidatedDataClean$POVCAT21 == 2] <- 'Near Poor'
FYConsolidatedDataClean$POVCAT21[FYConsolidatedDataClean$POVCAT21 == 3] <- 'Low Income'
FYConsolidatedDataClean$POVCAT21[FYConsolidatedDataClean$POVCAT21 == 4] <- 'Middle Income'
FYConsolidatedDataClean$POVCAT21[FYConsolidatedDataClean$POVCAT21 == 5] <- 'High Income'

#Education when first entering MEPS
FYConsolidatedDataClean$EDUCYR[FYConsolidatedDataClean$EDUCYR == 0] <- 'No School/Kindergarten'
FYConsolidatedDataClean$EDUCYR[FYConsolidatedDataClean$EDUCYR %in% 1:8] <- 'Elementary Grades'
FYConsolidatedDataClean$EDUCYR[FYConsolidatedDataClean$EDUCYR %in% 9:11] <- 'HighSchool Grades 9-11'
FYConsolidatedDataClean$EDUCYR[FYConsolidatedDataClean$EDUCYR == 12] <- 'Grade 12'
FYConsolidatedDataClean$EDUCYR[FYConsolidatedDataClean$EDUCYR == 13] <- '1 Year College'
FYConsolidatedDataClean$EDUCYR[FYConsolidatedDataClean$EDUCYR == 14] <- '2 Years College'
FYConsolidatedDataClean$EDUCYR[FYConsolidatedDataClean$EDUCYR == 15] <- '3 Years College'
FYConsolidatedDataClean$EDUCYR[FYConsolidatedDataClean$EDUCYR == 16] <- '4 Years College'
FYConsolidatedDataClean$EDUCYR[FYConsolidatedDataClean$EDUCYR == 17] <- '5+ Years College'

#Insurance Coverage
FYConsolidatedDataClean$INSCOV21[FYConsolidatedDataClean$INSCOV21 == 1] <- 'Any Private'
FYConsolidatedDataClean$INSCOV21[FYConsolidatedDataClean$INSCOV21 == 2] <- 'Public Only'
FYConsolidatedDataClean$INSCOV21[FYConsolidatedDataClean$INSCOV21 == 3] <- 'Uninsured'

#Census Location (As of 12/31/21)
FYConsolidatedDataClean$REGION21[FYConsolidatedDataClean$REGION21 == 1] <- 'NorthEast'
FYConsolidatedDataClean$REGION21[FYConsolidatedDataClean$REGION21 == 2] <- 'MidWest'
FYConsolidatedDataClean$REGION21[FYConsolidatedDataClean$REGION21 == 3] <- 'South'
FYConsolidatedDataClean$REGION21[FYConsolidatedDataClean$REGION21 == 4] <- 'West'

#Percieved Mental Health Status (As of Round 5/3)
FYConsolidatedDataClean$MNHLTH53[FYConsolidatedDataClean$MNHLTH53 == 1] <- 'Excellent'
FYConsolidatedDataClean$MNHLTH53[FYConsolidatedDataClean$MNHLTH53 == 2] <- 'Very Good'
FYConsolidatedDataClean$MNHLTH53[FYConsolidatedDataClean$MNHLTH53 == 3] <- 'Good'
FYConsolidatedDataClean$MNHLTH53[FYConsolidatedDataClean$MNHLTH53 == 4] <- 'Fair'
FYConsolidatedDataClean$MNHLTH53[FYConsolidatedDataClean$MNHLTH53 == 5] <- 'Poor'

FYConsolidatedDataClean
```

``` {r}
#Trimming OfficeBasedVisits

keeps2 <- c("DUPERSID", "INDCODEX", "OCCCODEX", "EMPLINS")

OfficeBasedVisitsJoining <- subset(OfficeBasedVisits, select = keeps2)

OfficeBasedVisitsJoining
```
```{r}
#Replacing numeric values with qualitative details OfficeBasedVisitsJoining

OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == -1] <- 'Inapplicapble'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 1] <- 'Natural Resources'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 2] <- 'Mining'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 3] <- 'Consrtuction'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 4] <- 'Manufacturing'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 5] <- 'Wholesale & Retail Trade'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 6] <- 'Transportation & Utilities'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 7] <- 'Information'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 8] <- 'Financial Activities'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 9] <- 'Professional & Business Services'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 10] <- 'Education, Health, & Social Services'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 11] <- 'Leisure & Hospitality'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 12] <- 'Other Services'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 13] <- 'Public Administration'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 14] <- 'Military'
OfficeBasedVisitsJoining$INDCODEX[OfficeBasedVisitsJoining$INDCODEX == 15] <- 'Unclassible Industry'

OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == -1] <- 'Inapplicapble'
OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == 1] <- 'Management, Business, & Financial Operations'
OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == 2] <- 'Professional & Related Occupations'
OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == 3] <- 'Service Occupations'
OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == 4] <- 'Sales & Related Operations'
OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == 5] <- 'Office & Administrative Support'
OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == 6] <- 'Farming, Fishing, & Forestry'
OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == 7] <- 'Construction, Extraction, & Maintenance'
OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == 8] <- 'Production, Transportation, & Material Moving'
OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == 9] <- 'Military Specific Occupations'
OfficeBasedVisitsJoining$OCCCODEX[OfficeBasedVisitsJoining$OCCCODEX == 11] <- 'Unclassible Occupation'

OfficeBasedVisitsJoining$EMPLINS[OfficeBasedVisitsJoining$EMPLINS == -1] <- 'Inapplicapble'
OfficeBasedVisitsJoining$EMPLINS[OfficeBasedVisitsJoining$EMPLINS == 1] <- 'Yes'
OfficeBasedVisitsJoining$EMPLINS[OfficeBasedVisitsJoining$EMPLINS == 2] <- 'No'

OfficeBasedVisitsJoining
```

```{r}
#Joining FYConsolidatedDataClean and OfficeBasedVisitsJoining 
FYOfficeInner <- merge(FYConsolidatedDataClean, OfficeBasedVisitsJoining, by = "DUPERSID")

FYOfficeInner

FYOfficeLeft <- merge(FYConsolidatedDataClean, OfficeBasedVisitsJoining, by = "DUPERSID", all.x = TRUE)

FYOfficeLeft
```
